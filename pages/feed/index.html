<div class="grid">
    <div class="column"></div>
    <div class="column"></div>
    <div class="column"></div>
    <div class="column"></div>
    <div class="column"></div>
    <div class="column"></div>
    <div class="column"></div>
    <div class="column"></div>
    <div class="column"></div>
    <div class="column"></div>
    <div class="column"></div>
    <div class="column"></div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/3.3.1/js/swiper.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/3.3.1/css/swiper.min.css" />

<main>

    <div class="heading-feed">
        <img class="logo-heading-home" src="../../public/media/svg-assets/feed.svg" alt="">
        <p class="thirdtitle">
            Elevate your soul, mind & space <br>
            with exceptional furniture
        </p>
    </div>



</main>

<div class="nav-feed">
    <div id="shuffleButton" class="shuffleButtonFeed small-text">Shuffle</div>
    <div class="button-in-context-image small-text">Switch</div>
    <div class="w-context-button small-text">Switch</div>
    <div class="small-text filters-feed-button">Filters</div>
</div>

<div class="sidebar-filters">
    <div id="resetButton" class="small-text">Reset filters</div>
    <div id="filters">
        <div class="filter-category">
            <h3 class="thirdtitle">Type of items</h3>
            <div class="container-buttons-filters">
                <button class="filter-btn small-text" data-filter=".sofas-armchairs">Sofas & Armchairs</button>

                <button class="filter-btn small-text" data-filter=".chairs">Chairs</button>
                <button class="filter-btn small-text" data-filter=".tables">Tables</button>
                <button class="filter-btn small-text" data-filter=".furniture-storage">Furniture & Storage</button>
                <button class="filter-btn small-text" data-filter=".lamps-lighting">Lamps & Lighting</button>
                <button class="filter-btn small-text" data-filter=".objectss-accessories">Objects & Accessories</button>
                <button class="filter-btn small-text" data-filter=".technology">Technology</button>
                <button class="filter-btn small-text" data-filter=".outdoor">Outdoor</button>
            </div>

        </div>

        <div class="filter-category">
            <h3 class="thirdtitle">Materials</h3>
            <div class="container-buttons-filters">
                <button class="filter-btn small-text" data-filter=".wood">Wood</button>
                <button class="filter-btn small-text" data-filter=".metal">Metal</button>
                <button class="filter-btn small-text" data-filter=".metal">Plastic</button>
                <button class="filter-btn small-text" data-filter=".fabric">Fabric</button>
                <button class="filter-btn small-text" data-filter=".velvet">Velvet</button>
                <button class="filter-btn small-text" data-filter=".leather">Leather</button>
                <button class="filter-btn small-text" data-filter=".nylon">Nylon</button>
                <button class="filter-btn small-text" data-filter=".coton">Coton</button>

            </div>
        </div>
        <div class="filter-category">
            <h3 class="thirdtitle">Brands</h3>
            <div class="container-buttons-filters">
                <button class="filter-btn small-text" data-filter=".flos">Flos</button>
                <button class="filter-btn small-text" data-filter=".ligneroset">Ligne Roset</button>
                <button class="filter-btn small-text" data-filter=".b&bitalia">B&B Italia</button>
                <button class="filter-btn small-text" data-filter=".knoll">Knoll</button>
                <button class="filter-btn small-text" data-filter=".ethnicraft">Ethnicraft</button>
                <button class="filter-btn small-text" data-filter=".carlhansen">Carl Hansen</button>
                <button class="filter-btn small-text" data-filter=".fatboy">Fatboy</button>
                <button class="filter-btn small-text" data-filter=".oluce">Oluce</button>
                <button class="filter-btn small-text" data-filter=".cassina">Cassina</button>
            </div>
            <div class="view-more-brands-button-filters-sidebar small-text">View more</div>
        </div>
        <div class="filter-category">
            <h3 class="thirdtitle">Rooms</h3>
            <div class="container-buttons-filters">
                <button class="filter-btn small-text" data-filter=".living-room">Living Room</button>
                <button class="filter-btn small-text" data-filter=".bathroom">Bathroom</button>
            </div>

        </div>

    </div>
    <div class="cross-close-filters">
        <img src="../../public/media/svg-assets/cross-white.svg" alt="">
    </div>
</div>
<div class="blank-click-layout-sidebar"></div>



<script>
    document.addEventListener('DOMContentLoaded', function () {
        const filterButtons = document.querySelectorAll('.filter-btn');
        const products = document.querySelectorAll('.main-wrapper-products-table .card-product-donzelli');
        const resetButton = document.getElementById('resetButton'); // Assurez-vous que l'ID correspond à votre bouton Reset dans le HTML

        filterButtons.forEach(btn => {
            btn.addEventListener('click', function () {
                // Toggle du bouton actif
                this.classList.toggle('activeFilter');

                // Mise à jour de l'affichage des produits
                updateProductDisplay();
            });
        });

        resetButton.addEventListener('click', function () {
            // Enlever la classe 'activeFilter' de tous les boutons de filtre
            filterButtons.forEach(btn => {
                btn.classList.remove('activeFilter');
            });

            // Mise à jour de l'affichage des produits
            updateProductDisplay();
        });

        function updateProductDisplay() {
            const activeFilters = document.querySelectorAll('.filter-btn.activeFilter');

            // Groupement des filtres actifs par catégorie
            let filtersByCategory = {
                'Brands': new Set(),
                'Type of items': new Set(),
                'Rooms': new Set(),
                'Materials': new Set()
            };

            // Remplir les ensembles de filtres par catégorie
            activeFilters.forEach(btn => {
                const category = btn.closest('.filter-category').querySelector('h3').innerText;
                const filterClass = btn.getAttribute('data-filter').substring(1);
                filtersByCategory[category].add(filterClass);
            });

            products.forEach(product => {
                let shouldBeVisible = true;

                Object.keys(filtersByCategory).forEach(category => {
                    if (filtersByCategory[category].size > 0) {
                        const matchesCategory = [...filtersByCategory[category]].some(filterClass => product.classList.contains(filterClass));
                        shouldBeVisible = shouldBeVisible && matchesCategory;
                    }
                });

                product.classList.toggle('hidden', !shouldBeVisible);
            });
        }
    });

</script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        var wrapper = document.querySelector('.main-wrapper-products-table');
        var cards = Array.prototype.slice.call(wrapper.getElementsByClassName('card-product-donzelli'));

        for (var i = cards.length; i >= 0; i--) {
            wrapper.appendChild(cards[Math.random() * i | 0]);
        }
    });

    function shuffleProducts() {
        var wrapper = document.querySelector('.main-wrapper-products-table');
        var cards = Array.prototype.slice.call(wrapper.getElementsByClassName('card-product-donzelli'));
        var wContextButton = document.querySelector(".w-context-button");

        for (var i = cards.length; i >= 0; i--) {
            wrapper.appendChild(cards[Math.random() * i | 0]);
        }
    }

    document.getElementById('shuffleButton').addEventListener('click', shuffleProducts);


    window.addEventListener("load", function () {
        var contextButton = document.querySelector('.button-in-context-image');
        var wContextButton = document.querySelector('.w-context-button'); // Define wContextButton here
        var cards = document.querySelectorAll('.card-product-donzelli'); // Select all cards

        contextButton.onclick = function () {
            cards.forEach(function (card) {
                card.classList.add('showincontextclass'); // Add class for each card
            });
            contextButton.classList.add("hide-switch-button");
            wContextButton.classList.add("add-w-context-button");
        };

        wContextButton.onclick = function () {
            cards.forEach(function (card) {
                card.classList.remove('showincontextclass'); // Remove class for each card
            });
            contextButton.classList.remove("hide-switch-button");
            wContextButton.classList.remove("add-w-context-button");
        };
    });




</script>
<script src="../../js/sidebar-filter.js"></script>